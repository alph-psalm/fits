<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fast-Peel â€” Enhanced Lookbook with Shelves & Socials</title>

  <!-- Font Awesome Icons for Social Media -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    /* ================= Theme variables & palettes ================= */
    :root{
      --bg: #000;
      --font: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      --content-width: 1200px;
      --transition: 420ms cubic-bezier(.2,.9,.25,1);
      --shelf-columns: 5;

      /* semantic colors (default brand palette) */
      --primary-900: #001029;
      --primary-700: #012169;
      --accent: #ffd140;
      --muted: rgba(255,255,255,0.06);
      --text-dark: #0b1220;
      --text-light: #fff;
    }

    /* Neon palette */
    .palette--neon{
      --primary-900: #050014;
      --primary-700: #22004d;
      --accent: #00f5a0;
      --muted: rgba(0,255,200,0.06);
      --text-dark: #071018;
      --text-light: #fcfffe;
    }

    /* Pastel palette */
    .palette--pastel{
      --primary-900: #fff7fb;
      --primary-700: #ffeff5;
      --accent: #ff7aa2;
      --muted: rgba(10,10,10,0.04);
      --text-dark: #1b1b25;
      --text-light: #0b0b0b;
    }

    /* Monochrome palette */
    .palette--mono{
      --primary-900: #0f1724;
      --primary-700: #1a1f26;
      --accent: #bdbdbd;
      --muted: rgba(255,255,255,0.03);
      --text-dark: #0b0b0b;
      --text-light: #f6f6f6;
    }

    /* ================= Base layout ================= */
    html,body{
      height:100%;
      margin:0;
      background:var(--bg);
      color:var(--text-light);
      font-family: var(--font);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      scroll-behavior: smooth;
      overflow-y: auto;
    }

    /* Canvas background sits behind sticky sections */
    #bg-canvas{
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
      pointer-events: none;
      mix-blend-mode: screen;
      opacity: .16;
      transition: opacity 420ms ease;
    }

    /* Container to ensure sections stack above canvas */
    main { position: relative; z-index: 10; }

    /* Quick-peel sticky technique */
    .section{
      position: sticky;
      top: 0;
      height: 100vh;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      overflow: visible;
      transition: transform var(--transition), box-shadow var(--transition), filter var(--transition);
      will-change: transform;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
      box-shadow: 0 -18px 40px rgba(0,0,0,0.35);
      isolation: isolate;
    }

    /* Peel SVG overlay - sits above the section background but behind content */
    .section .peel-svg{
      position: absolute;
      top: -14vh;
      left: 0;
      width: 100%;
      height: 28vh;
      pointer-events: none;
      z-index: 2;
      transform-origin: 50% 100%;
      opacity: .98;
      mix-blend-mode: normal;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,0.25));
    }

    /* Section inner content (above peel) */
    .content{
      padding: 36px;
      max-width: var(--content-width);
      width: calc(100% - 80px);
      box-sizing: border-box;
      transform: translateY(8px) scale(.995);
      opacity: .98;
      transition: transform var(--transition), opacity var(--transition);
      position: relative;
      z-index: 6;
    }

    /* Visually active section */
    .section.active{
      transform: perspective(900px) translateZ(0) rotateX(0deg) scale(1.0);
      box-shadow: 0 -26px 60px rgba(0,0,0,0.45);
    }
    .section.active .content{
      transform: translateY(0) scale(1);
      opacity: 1;
    }
    .section:not(.active){
      transform: perspective(900px) translateZ(-16px) rotateX(3deg) scale(.994);
      filter: saturate(.93) brightness(.96);
    }

    /* Typography */
    h1{
      font-size: clamp(28px, 6.5vw, 56px);
      margin: 0 0 10px;
      line-height: 1;
      letter-spacing: -1px;
      font-weight: 800;
      color: inherit;
    }
    p{
      margin: 0;
      font-size: clamp(12px, 1.6vw, 16px);
      text-transform: uppercase;
      letter-spacing: 1px;
      opacity: .95;
      font-weight: 700;
    }

    /* ================= 5-Column Shelf Layout ================= */
    .shelf-container {
      display: grid;
      grid-template-columns: repeat(var(--shelf-columns), 1fr);
      gap: 24px;
      margin: 36px auto;
      max-width: 1400px;
      padding: 0 20px;
      position: relative;
    }
    
    .shelf-item {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius: 14px;
      border: 2px solid rgba(255,255,255,0.06);
      padding: 20px;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      min-height: 320px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      box-shadow: 0 8px 30px rgba(0,0,0,0.35);
    }
    
    .shelf-item:hover {
      transform: translateY(-8px);
      border-color: rgba(255,255,255,0.15);
      box-shadow: 0 15px 40px rgba(0,0,0,0.45);
    }
    
    .shelf-img {
      width: 100%;
      height: 160px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 16px;
      background: linear-gradient(45deg, #1a1a2e, #16213e);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 48px;
      color: rgba(255,255,255,0.9);
    }
    
    .shelf-title {
      font-size: 16px;
      font-weight: 800;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .shelf-price {
      font-size: 18px;
      font-weight: 900;
      color: var(--accent);
      margin: 12px 0;
    }
    
    .shelf-label {
      position: absolute;
      top: 12px;
      right: 12px;
      background: rgba(0,0,0,0.7);
      color: var(--text-light);
      font-weight: 700;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 10px;
      letter-spacing: 1px;
      text-transform: uppercase;
    }
    
    .shelf-add-btn {
      background: var(--accent);
      color: var(--text-dark);
      border: none;
      border-radius: 20px;
      padding: 8px 16px;
      font-weight: 800;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 12px;
    }
    
    .shelf-add-btn:hover {
      background: #ffdf80;
      transform: scale(1.05);
    }

    /* ================= Social Access Port ================= */
    .social-port {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1200;
      background: rgba(0,0,0,0.75);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      border: 1px solid rgba(255,255,255,0.1);
      transition: all 0.3s ease;
    }
    
    .social-toggle {
      width: 50px;
      height: 50px;
      background: var(--accent);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      color: var(--text-dark);
      font-weight: 900;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
    }
    
    .social-toggle:hover {
      transform: rotate(15deg) scale(1.1);
    }
    
    .social-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-top: 15px;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease;
    }
    
    .social-grid.open {
      max-height: 300px;
    }
    
    .social-icon {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      cursor: pointer;
      transition: all 0.3s ease;
      color: white;
      text-decoration: none;
    }
    
    .social-icon:hover {
      transform: translateY(-5px) scale(1.1);
    }
    
    /* Social Media Brand Colors */
    .social-tg { background: #0088cc; }
    .social-ig { background: #E1306C; }
    .social-fb { background: #3b5998; }
    .social-rd { background: #FF4500; }
    .social-tw { background: #1DA1F2; }
    .social-dc { background: #5865F2; }
    .social-tt { background: #000000; }
    .social-tc { background: #9146FF; }
    .social-pn { background: #E60023; }
    .social-in { background: #0077B5; }
    .social-sc { background: #FFFC00; color: #000; }
    .social-yt { background: #FF0000; }

    .buy-btn{
      margin-top: 20px;
      padding: 12px 28px;
      border-radius: 30px;
      border: 2px solid currentColor;
      background: transparent;
      color: inherit;
      font-weight: 800;
      cursor: pointer;
      letter-spacing: .6px;
      transition: transform 220ms ease, box-shadow 220ms ease, background 220ms ease;
    }
    .buy-btn:hover{ transform: translateY(-4px); box-shadow: 0 10px 30px rgba(0,0,0,0.45); }

    .eyebrow{ font-size: 12px; letter-spacing: 2px; opacity:.95; font-weight:800; text-transform:uppercase; margin-bottom:8px; color:inherit; }

    /* ================= Creative section color stories (using variables) ================= */
    .s1{ background: linear-gradient(180deg, var(--primary-900) 0%, var(--primary-700) 60%); color: var(--text-light); }
    .s1 .peel-fill{ fill: radial-gradient; /* placeholder to keep specificity */ }

    .s2{ background: linear-gradient(180deg, #ffffff 0%, #f3f7ff 60%); color: var(--text-dark); }
    .s3{ background: linear-gradient(135deg, var(--accent) 10%, #ffb347 75%); color: var(--text-dark); }
    .s4{ background: linear-gradient(180deg, #efe6dc 0%, #e6e0d9 60%); color: var(--text-dark); }
    .s5{ background: linear-gradient(180deg, #0070e0 0%, #0048b8 60%); color: var(--text-light); }
    .s6{ background: linear-gradient(180deg, #161616 0%, #1a1a1a 60%); color: var(--text-light); }
    .s7{ background: linear-gradient(135deg, #fff 0%, #f8f8f8 60%); color: var(--text-dark); }

    .s8{ background: linear-gradient(120deg,#ff7aa2 0%, #ffb3d1 60%); color: var(--text-dark); }
    .s9{ background: linear-gradient(165deg,#20c997 0%, #007a5a 60%); color: var(--text-dark); }
    .s10{ background: linear-gradient(120deg,#6e00ff 0%, #1b2cff 60%); color: var(--text-light); }
    .s11{ background: linear-gradient(120deg,#ffb86b 0%, #ff6b6b 60%); color: var(--text-dark); }
    .s12{ background: linear-gradient(180deg,#0f1724 0%, #001018 60%); color: var(--text-light); }

    /* ================= Peel SVG subtle animation ================= */
    .peel-path{
      transform-origin: 50% 100%;
      animation: peelFloat 6s ease-in-out infinite;
      opacity: 0.98;
    }
    @keyframes peelFloat{
      0% { transform: translateY(0px) rotate(0.0deg); }
      25% { transform: translateY(-6px) rotate(-0.2deg); }
      50% { transform: translateY(0px) rotate(0.0deg); }
      75% { transform: translateY(6px) rotate(0.2deg); }
      100% { transform: translateY(0px) rotate(0.0deg); }
    }

    /* blend & stroke styles for peel */
    .peel-stroke{ fill: transparent; stroke: rgba(255,255,255,0.06); stroke-width: 2; }
    .peel-fill{
      fill: url(#peelGradient);
      opacity: 0.95;
      mix-blend-mode: normal;
    }

    /* ================= Palette switcher UI ================= */
    .palette-switcher{
      position: fixed;
      top: 18px;
      left: 20px;
      z-index: 1201;
      display:flex;
      gap:8px;
      background: rgba(0,0,0,0.28);
      padding:8px;
      border-radius:12px;
      backdrop-filter: blur(6px);
      align-items:center;
      box-shadow: 0 6px 20px rgba(0,0,0,0.36);
    }
    .palette-switcher button{
      min-width: 44px;
      min-height: 32px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.06);
      background: transparent;
      color: inherit;
      cursor: pointer;
      padding:6px 10px;
      font-weight:700;
      font-size:12px;
    }
    .palette-switcher .active{ box-shadow: 0 6px 18px rgba(0,0,0,0.35); transform: translateY(-2px); }

    /* Progress bar right side */
    .progress-wrap{
      position: fixed;
      top: 18px;
      right: 20px;
      width: 10px;
      height: calc(100vh - 36px);
      display: flex;
      align-items: flex-start;
      justify-content: center;
      z-index: 1200;
      pointer-events: none;
    }
    .progress{
      width: 4px;
      background: linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.04));
      border-radius: 6px;
      height: 100%;
      position: relative;
      overflow: hidden;
    }
    .progress > i{
      position: absolute;
      left:0; top:0;
      width:100%;
      height:0%;
      background: linear-gradient(180deg, var(--accent), #fff5b2);
      border-radius:6px;
      transition: height 420ms ease;
      pointer-events:auto;
    }

    /* ================ Modal / Lightbox ================ */
    .modal{
      position: fixed;
      inset:0;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1300;
      background: linear-gradient(180deg, rgba(2,6,23,0.7), rgba(2,6,23,0.85));
      padding: 28px;
    }
    .modal.open{ display:flex; }
    .modal-card{
      width: min(880px, 96%);
      max-height: 86vh;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius: 14px;
      padding: 28px;
      overflow:auto;
      border: 1px solid rgba(255,255,255,0.04);
      box-shadow: 0 30px 70px rgba(0,0,0,0.6);
      color: var(--text-light);
    }
    .modal .close{
      position: absolute;
      top: 18px;
      right: 18px;
      background: transparent;
      border: 0;
      color: var(--text-light);
      font-weight: 900;
      font-size: 18px;
      cursor: pointer;
    }
    .modal .meta{ display:flex; gap: 18px; align-items:center; margin-bottom:12px; }
    .modal .meta .thumb{ width:140px; height:180px; border-radius: 10px; background: rgba(255,255,255,0.03); display:flex; align-items:center; justify-content:center; font-weight:900; text-transform:uppercase; letter-spacing:1px; }

    /* Responsive tweaks */
    @media (max-width:1200px){
      .shelf-container {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    
    @media (max-width:992px){
      .shelf-container {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    
    @media (max-width:768px){
      .shelf-container {
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
      }
      .shelf-item {
        min-height: 280px;
      }
      .shelf-img {
        height: 130px;
        font-size: 36px;
      }
      .product-box{ width: 190px; height: 220px; border-radius:12px; }
      .content{ padding: 28px; }
      .progress-wrap{ display:none; }
      .palette-switcher{ left: 12px; top: 12px; padding:6px; gap:6px; }
      .peel-svg { display: none; } /* hide complex svg on small screens for perf */
      .social-port {
        bottom: 10px;
        right: 10px;
      }
    }
    
    @media (max-width:480px){
      .shelf-container {
        grid-template-columns: 1fr;
      }
      .social-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }
  </style>
</head>
<body class="palette--neon">
  <!-- Canvas for parallax background visuals -->
  <canvas id="bg-canvas" aria-hidden="true"></canvas>

  <!-- Palette switcher (three palettes: brand/default, neon, pastel, mono) -->
  <div class="palette-switcher" role="toolbar" aria-label="Palette">
    <button id="btn-default" class="active" title="Brand">Brand</button>
    <button id="btn-neon" title="Neon">Neon</button>
    <button id="btn-pastel" title="Pastel">Pastel</button>
    <button id="btn-mono" title="Mono">Mono</button>
  </div>

  <!-- Progress indicator -->
  <div class="progress-wrap" aria-hidden="true">
    <div class="progress"><i></i></div>
  </div>

  <!-- Social Access Port -->
  <div class="social-port" id="socialPort">
    <div class="social-toggle" id="socialToggle">
      <i class="fas fa-share-alt"></i>
    </div>
    <div class="social-grid" id="socialGrid">
      <a href="https://t.me/" target="_blank" class="social-icon social-tg" title="Telegram">
        <i class="fab fa-telegram"></i>
      </a>
      <a href="https://instagram.com/" target="_blank" class="social-icon social-ig" title="Instagram">
        <i class="fab fa-instagram"></i>
      </a>
      <a href="https://facebook.com/" target="_blank" class="social-icon social-fb" title="Facebook">
        <i class="fab fa-facebook"></i>
      </a>
      <a href="https://reddit.com/" target="_blank" class="social-icon social-rd" title="Reddit">
        <i class="fab fa-reddit"></i>
      </a>
      <a href="https://twitter.com/" target="_blank" class="social-icon social-tw" title="Twitter">
        <i class="fab fa-twitter"></i>
      </a>
      <a href="https://discord.com/" target="_blank" class="social-icon social-dc" title="Discord">
        <i class="fab fa-discord"></i>
      </a>
      <a href="https://tiktok.com/" target="_blank" class="social-icon social-tt" title="TikTok">
        <i class="fab fa-tiktok"></i>
      </a>
      <a href="https://twitch.tv/" target="_blank" class="social-icon social-tc" title="Twitch">
        <i class="fab fa-twitch"></i>
      </a>
      <a href="https://pinterest.com/" target="_blank" class="social-icon social-pn" title="Pinterest">
        <i class="fab fa-pinterest"></i>
      </a>
      <a href="https://linkedin.com/" target="_blank" class="social-icon social-in" title="LinkedIn">
        <i class="fab fa-linkedin"></i>
      </a>
      <a href="https://snapchat.com/" target="_blank" class="social-icon social-sc" title="Snapchat">
        <i class="fab fa-snapchat"></i>
      </a>
      <a href="https://youtube.com/" target="_blank" class="social-icon social-yt" title="YouTube">
        <i class="fab fa-youtube"></i>
      </a>
    </div>
  </div>

  <main>
    <!-- Section template with animated peel SVG and content -->
    <section class="section s1" id="s-hero" aria-label="Hero section">
      <!-- Peel SVG: a curved "paper" edge that animates subtly -->
      <svg class="peel-svg" viewBox="0 0 1600 240" preserveAspectRatio="none" aria-hidden="true">
        <defs>
          <linearGradient id="peelGradient" x1="0" x2="0" y1="0" y2="1">
            <stop offset="0%" stop-color="rgba(255,255,255,0.06)"></stop>
            <stop offset="100%" stop-color="rgba(255,255,255,0.01)"></stop>
          </linearGradient>
        </defs>
        <path class="peel-path peel-fill" d="M0,220 C200,160 400,200 600,180 C800,160 1000,200 1200,180 C1400,160 1600,200 1600,200 L1600,240 L0,240 Z" fill="url(#peelGradient)"></path>
        <path class="peel-path peel-stroke" d="M0,220 C200,160 400,200 600,180 C800,160 1000,200 1200,180 C1400,160 1600,200" fill="none" stroke="rgba(0,0,0,0.12)"></path>
      </svg>

      <div class="content">
        <p class="eyebrow">Late 2026 â€” Lookbook Drop</p>
        <h1>THE LOOKBOOK â€” FAST PEEL</h1>
        <p style="margin-top:12px; font-weight:700; opacity:.95">A staged peel experience: scroll to reveal the collection, one card at a time.</p>
      </div>
    </section>

    <section class="section s2" id="s-hoodies">
      <div class="content">
        <p class="eyebrow">01</p>
        <h1>Hoodies â€” Heavy Fleece</h1>
        <p style="margin-bottom: 24px; font-weight: 600;">Premium heavyweight fleece collection</p>
        
        <!-- 5-Column Shelf -->
        <div class="shelf-container" id="hoodies-shelf">
          <!-- Shelf items will be populated by JavaScript -->
        </div>
        
        <button class="buy-btn" onclick="openCollection('hoodies')">View All Hoodies</button>
      </div>
    </section>

    <section class="section s3" id="s-accessories" aria-label="Accessories">
      <svg class="peel-svg" viewBox="0 0 1600 240" preserveAspectRatio="none" aria-hidden="true">
        <path class="peel-path peel-fill" d="M0,220 C260,170 420,210 620,180 C820,150 980,210 1200,170 C1400,130 1600,210 1600,210 L1600,240 L0,240 Z" fill="url(#peelGradient)"></path>
        <path class="peel-path peel-stroke" d="M0,220 C260,170 420,210 620,180 C820,150 980,210 1200,170 C1400,130 1600,210" fill="none" stroke="rgba(0,0,0,0.12)"></path>
      </svg>

      <div class="content">
        <p class="eyebrow">02</p>
        <h1>Accessories â€” Canvas & Leather</h1>
        <p style="margin-bottom: 24px; font-weight: 600;">Functional designs with premium materials</p>
        
        <!-- 5-Column Shelf -->
        <div class="shelf-container" id="accessories-shelf">
          <!-- Shelf items will be populated by JavaScript -->
        </div>
        
        <button class="buy-btn" onclick="openCollection('accessories')">View All Accessories</button>
      </div>
    </section>

    <section class="section s4" id="s-headwear" aria-label="Headwear">
      <svg class="peel-svg" viewBox="0 0 1600 240" preserveAspectRatio="none" aria-hidden="true">
        <path class="peel-path peel-fill" d="M0,220 C180,150 420,200 640,180 C860,160 1100,210 1300,180 C1500,150 1600,200 1600,200 L1600,240 L0,240 Z" fill="url(#peelGradient)"></path>
        <path class="peel-path peel-stroke" d="M0,220 C180,150 420,200 640,180 C860,160 1100,210 1300,180 C1500,150 1600,200" fill="none" stroke="rgba(0,0,0,0.12)"></path>
      </svg>

      <div class="content">
        <p class="eyebrow">03</p>
        <h1>Headwear â€” Ribbed Beanie</h1>
        <p style="margin-bottom: 24px; font-weight: 600;">Warmth and style for every season</p>
        
        <!-- 5-Column Shelf -->
        <div class="shelf-container" id="headwear-shelf">
          <!-- Shelf items will be populated by JavaScript -->
        </div>
        
        <button class="buy-btn" onclick="openCollection('headwear')">View All Headwear</button>
      </div>
    </section>

    <section class="section s5" id="s-outerwear" aria-label="Outerwear">
      <svg class="peel-svg" viewBox="0 0 1600 240" preserveAspectRatio="none" aria-hidden="true">
        <path class="peel-path peel-fill" d="M0,220 C200,170 420,200 640,180 C860,160 1060,200 1260,180 C1460,160 1600,195 1600,195 L1600,240 L0,240 Z" fill="url(#peelGradient)"></path>
        <path class="peel-path peel-stroke" d="M0,220 C200,170 420,200 640,180 C860,160 1060,200 1260,180 C1460,160 1600,195" fill="none" stroke="rgba(0,0,0,0.12)"></path>
      </svg>

      <div class="content">
        <p class="eyebrow">04</p>
        <h1>Outerwear â€” Shell Jacket</h1>
        <p style="margin-bottom: 24px; font-weight: 600;">Technical shells for all weather conditions</p>
        
        <!-- 5-Column Shelf -->
        <div class="shelf-container" id="outerwear-shelf">
          <!-- Shelf items will be populated by JavaScript -->
        </div>
        
        <button class="buy-btn" onclick="openCollection('outerwear')">View All Outerwear</button>
      </div>
    </section>

    <section class="section s6" id="s-footwear" aria-label="Footwear">
      <svg class="peel-svg" viewBox="0 0 1600 240" preserveAspectRatio="none" aria-hidden="true">
        <path class="peel-path peel-fill" d="M0,220 C220,150 420,200 640,180 C860,160 1060,200 1260,180 C1460,160 1600,190 1600,190 L1600,240 L0,240 Z" fill="url(#peelGradient)"></path>
        <path class="peel-path peel-stroke" d="M0,220 C220,150 420,200 640,180 C860,160 1060,200 1260,180 C1460,160 1600,190" fill="none" stroke="rgba(0,0,0,0.12)"></path>
      </svg>

      <div class="content">
        <p class="eyebrow">05</p>
        <h1>Footwear â€” Studio Slides</h1>
        <p style="margin-bottom: 24px; font-weight: 600;">Comfort-focused footwear for studio and street</p>
        
        <!-- 5-Column Shelf -->
        <div class="shelf-container" id="footwear-shelf">
          <!-- Shelf items will be populated by JavaScript -->
        </div>
        
        <button class="buy-btn" onclick="openCollection('footwear')">View All Footwear</button>
      </div>
    </section>

    <section class="section s7" id="s-archive" aria-label="Archive">
      <svg class="peel-svg" viewBox="0 0 1600 240" preserveAspectRatio="none" aria-hidden="true">
        <path class="peel-path peel-fill" d="M0,220 C160,180 360,155 560,185 C760,215 980,160 1200,190 C1400,220 1600,170 1600,170 L1600,240 L0,240 Z" fill="url(#peelGradient)"></path>
        <path class="peel-path peel-stroke" d="M0,220 C160,180 360,155 560,185 C760,215 980,160 1200,190 C1400,220 1600,170" fill="none" stroke="rgba(0,0,0,0.12)"></path>
      </svg>

      <div class="content">
        <p class="eyebrow">06</p>
        <h1>Archive â€” Reference Vault</h1>
        <p style="margin-bottom: 24px; font-weight: 600;">Past season favorites and design reference pieces</p>
        
        <!-- 5-Column Shelf -->
        <div class="shelf-container" id="archive-shelf">
          <!-- Shelf items will be populated by JavaScript -->
        </div>
        
        <button class="buy-btn" style="background:#000;color:#fff;border:none" data-prod="waitlist" aria-haspopup="dialog">Join Waitlist</button>
      </div>
    </section>

    <section class="section s8" id="s-limited" aria-label="Limited">
      <svg class="peel-svg" viewBox="0 0 1600 240" preserveAspectRatio="none" aria-hidden="true">
        <path class="peel-path peel-fill" d="M0,220 C260,170 420,210 620,180 C820,150 980,210 1200,170 C1400,130 1600,210 1600,210 L1600,240 L0,240 Z" fill="url(#peelGradient)"></path>
        <path class="peel-path peel-stroke" d="M0,220 C260,170 420,210 620,180 C820,150 980,210 1200,170 C1400,130 1600,210" fill="none" stroke="rgba(0,0,0,0.12)"></path>
      </svg>

      <div class="content">
        <p class="eyebrow">07</p>
        <h1>Limited â€” Capsule Drops</h1>
        <p style="margin-bottom: 24px; font-weight: 600;">Exclusive short-run capsule collections</p>
        
        <!-- 5-Column Shelf -->
        <div class="shelf-container" id="limited-shelf">
          <!-- Shelf items will be populated by JavaScript -->
        </div>
        
        <button class="buy-btn" data-prod="capsule" aria-haspopup="dialog">View All Capsules</button>
      </div>
    </section>

    <section class="section s9" id="s-collab" aria-label="Collab">
      <svg class="peel-svg" viewBox="0 0 1600 240" preserveAspectRatio="none" aria-hidden="true">
        <path class="peel-path peel-fill" d="M0,220 C200,130 420,190 640,150 C860,110 1100,200 1300,175 C1500,150 1600,200 1600,200 L1600,240 L0,240 Z" fill="url(#peelGradient)"></path>
        <path class="peel-path peel-stroke" d="M0,220 C200,130 420,190 640,150 C860,110 1100,200 1300,175 C1500,150 1600,200" fill="none" stroke="rgba(0,0,0,0.12)"></path>
      </svg>

      <div class="content">
        <p class="eyebrow">08</p>
        <h1>Collab â€” Studio x Guest</h1>
        <p style="margin-bottom: 24px; font-weight: 600;">Limited edition collaborative pieces</p>
        
        <!-- 5-Column Shelf -->
        <div class="shelf-container" id="collab-shelf">
          <!-- Shelf items will be populated by JavaScript -->
        </div>
        
        <button class="buy-btn" data-prod="collab" aria-haspopup="dialog">Discover All Collabs</button>
      </div>
    </section>

    <section class="section s10" id="s-lookbook-video" aria-label="Lookbook teaser">
      <svg class="peel-svg" viewBox="0 0 1600 240" preserveAspectRatio="none" aria-hidden="true">
        <path class="peel-path peel-fill" d="M0,220 C200,160 420,210 650,180 C900,150 1100,210 1300,180 C1500,150 1600,200 1600,200 L1600,240 L0,240 Z" fill="url(#peelGradient)"></path>
        <path class="peel-path peel-stroke" d="M0,220 C200,160 420,210 650,180 C900,150 1100,210 1300,180 C1500,150 1600,200" fill="none" stroke="rgba(0,0,0,0.12)"></path>
      </svg>

      <div class="content">
        <p class="eyebrow">09</p>
        <h1>Lookbook â€” Motion Tease</h1>
        <p style="margin-bottom: 24px; font-weight: 600;">Cinematic visuals and motion content</p>
        
        <!-- 5-Column Shelf -->
        <div class="shelf-container" id="video-shelf">
          <!-- Shelf items will be populated by JavaScript -->
        </div>
        
        <button class="buy-btn" data-prod="teaser" aria-haspopup="dialog">Play All Teasers</button>
      </div>
    </section>

    <section class="section s11" id="s-archive-2" aria-label="Past seasons">
      <svg class="peel-svg" viewBox="0 0 1600 240" preserveAspectRatio="none" aria-hidden="true">
        <path class="peel-path peel-fill" d="M0,220 C160,200 360,170 560,190 C760,210 980,160 1200,190 C1400,220 1600,160 1600,160 L1600,240 L0,240 Z" fill="url(#peelGradient)"></path>
        <path class="peel-path peel-stroke" d="M0,220 C160,200 360,170 560,190 C760,210 980,160 1200,190 C1400,220 1600,160" fill="none" stroke="rgba(0,0,0,0.12)"></path>
      </svg>

      <div class="content">
        <p class="eyebrow">10</p>
        <h1>Studio â€” Past Seasons</h1>
        <p style="margin-bottom: 24px; font-weight: 600;">Explore our design evolution through the years</p>
        
        <!-- 5-Column Shelf -->
        <div class="shelf-container" id="past-shelf">
          <!-- Shelf items will be populated by JavaScript -->
        </div>
        
        <button class="buy-btn" data-prod="archive" aria-haspopup="dialog">View Full Archive</button>
      </div>
    </section>

    <section class="section s12" id="s-contact" aria-label="Join the drop">
      <svg class="peel-svg" viewBox="0 0 1600 240" preserveAspectRatio="none" aria-hidden="true">
        <path class="peel-path peel-fill" d="M0,220 C160,180 360,155 560,185 C760,215 980,160 1200,190 C1400,220 1600,170 1600,170 L1600,240 L0,240 Z" fill="url(#peelGradient)"></path>
        <path class="peel-path peel-stroke" d="M0,220 C160,180 360,155 560,185 C760,215 980,160 1200,190 C1400,220 1600,170" fill="none" stroke="rgba(0,0,0,0.12)"></path>
      </svg>

      <div class="content">
        <p class="eyebrow">FINAL</p>
        <h1>Join the Drop</h1>
        <p style="margin-top:12px; font-weight:700; opacity:.95">Sign up for release alerts, selection committee access, and collab previews.</p>
        
        <!-- 5-Column Shelf for waitlist benefits -->
        <div class="shelf-container" id="waitlist-shelf">
          <!-- Shelf items will be populated by JavaScript -->
        </div>
        
        <button class="buy-btn" style="background:var(--accent); color:var(--text-dark); border:none" data-prod="waitlist" aria-haspopup="dialog">Join Waitlist</button>
      </div>
    </section>
  </main>

  <!-- Modal / Lightbox -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-card" role="document">
      <button class="close" aria-label="Close modal">&times;</button>
      <div class="meta">
        <div class="thumb" id="modal-thumb">ITEM</div>
        <div>
          <h2 id="modal-title">Product Title</h2>
          <p id="modal-sub" style="opacity:.9; font-weight:700;"></p>
          <p id="modal-price" style="font-size: 20px; font-weight: 900; color: var(--accent); margin-top: 8px;">$--</p>
        </div>
      </div>
      <div id="modal-body" style="line-height:1.5; margin-top:8px; color:inherit;">
        <p>Loadingâ€¦</p>
      </div>
      <div style="display:flex; gap:12px; margin-top:18px; align-items:center;">
        <a id="modal-shop" class="buy-btn" href="#" role="button" style="background: var(--accent); color: var(--text-dark); border: none;">Add to Cart</a>
        <button id="modal-close-cta" class="buy-btn" style="background:transparent;">Continue Browsing</button>
      </div>
    </div>
  </div>

  <script>
    /* ================== Canvas parallax visual ================== */
    (function(){
      const canvas = document.getElementById('bg-canvas');
      const ctx = canvas.getContext && canvas.getContext('2d');
      if(!ctx) return;

      let W = canvas.width = innerWidth;
      let H = canvas.height = innerHeight;
      const circles = [];
      const CNT = Math.max(6, Math.floor(Math.min(W,H) / 120));

      // create layered circles with different depth
      for(let i=0;i<CNT;i++){
        circles.push({
          x: Math.random() * W,
          y: Math.random() * H,
          r: 40 + Math.random()*240,
          hue: 180 + Math.random()*220,
          sat: 60 + Math.random()*20,
          light: 45 + Math.random()*20,
          depth: 0.12 + Math.random()*0.9,
          vx: (Math.random()-0.5) * 0.01,
          vy: (Math.random()-0.5) * 0.01
        });
      }

      let mx = W/2, my = H/2, scrollY = 0;

      window.addEventListener('mousemove', (e) => { mx = e.clientX; my = e.clientY; });
      window.addEventListener('resize', () => {
        W = canvas.width = innerWidth; H = canvas.height = innerHeight;
      });
      window.addEventListener('scroll', () => { scrollY = pageYOffset || document.documentElement.scrollTop; });

      function draw(){
        ctx.clearRect(0,0,W,H);
        // subtle gradient backdrop
        const g = ctx.createLinearGradient(0,0,W,H);
        g.addColorStop(0, 'rgba(6,10,25,0.4)');
        g.addColorStop(1, 'rgba(2,6,23,0.55)');
        ctx.fillStyle = g;
        ctx.fillRect(0,0,W,H);

        for(let c of circles){
          // parallax motion based on mouse + scroll
          const dx = (mx - W/2) * 0.002 * c.depth;
          const dy = (my - H/2) * 0.002 * c.depth + (scrollY * 0.02 * c.depth);
          c.x += (Math.sin((Date.now()/6000 + c.depth*5)) * 0.25) + c.vx;
          c.y += (Math.cos((Date.now()/8000 + c.depth*7)) * 0.25) + c.vy;

          const grad = ctx.createRadialGradient(c.x - dx, c.y - dy, c.r*0.05, c.x - dx, c.y - dy, c.r);
          const color = `hsl(${c.hue} ${c.sat}% ${c.light}%)`;
          grad.addColorStop(0, color);
          grad.addColorStop(0.55, color.replace('%)', '%, 0.55)'));
          grad.addColorStop(1, color.replace('%)', '%, 0.03)'));

          ctx.globalCompositeOperation = 'lighter';
          ctx.fillStyle = grad;
          ctx.beginPath();
          ctx.arc(c.x - dx, c.y - dy, c.r, 0, Math.PI*2);
          ctx.fill();
        }
        ctx.globalCompositeOperation = 'source-over';
        requestAnimationFrame(draw);
      }
      requestAnimationFrame(draw);
    })();

    /* ================== Intersection observer for active state & progress ================== */
    (function(){
      const sections = Array.from(document.querySelectorAll('.section'));
      const progressBarFill = document.querySelector('.progress > i');

      if (!('IntersectionObserver' in window)) {
        sections.forEach((s,i) => { if(i===0) s.classList.add('active'); });
        return;
      }

      const io = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          const el = entry.target;
          if(entry.intersectionRatio > 0.48){
            el.classList.add('active');
            const index = sections.indexOf(el);
            const pct = Math.round(((index + 1) / sections.length) * 100);
            if (progressBarFill) progressBarFill.style.height = pct + '%';
          } else {
            el.classList.remove('active');
          }
        });
      }, { threshold: [0, 0.48, 0.75, 1] });

      sections.forEach(s => io.observe(s));
    })();

    /* ================== SOCIAL ACCESS PORT FUNCTIONALITY ================== */
    (function(){
      const socialToggle = document.getElementById('socialToggle');
      const socialGrid = document.getElementById('socialGrid');
      
      socialToggle.addEventListener('click', () => {
        socialGrid.classList.toggle('open');
      });
      
      // Close social grid when clicking outside
      document.addEventListener('click', (e) => {
        if (!socialToggle.contains(e.target) && !socialGrid.contains(e.target)) {
          socialGrid.classList.remove('open');
        }
      });
    })();

    /* ================== PRODUCT DATA & SHELF MANAGEMENT ================== */
    // EASY-TO-EDIT PRODUCT DATA - ADD NEW PRODUCTS HERE
    const productCollections = {
      hoodies: [
        { id: 'hoodie1', name: "Mason Heavy Fleece", price: "$98", icon: "ðŸ§¥", label: "Bestseller", desc: "420gsm loopback fleece, relaxed fit" },
        { id: 'hoodie2', name: "Ashland Oversized", price: "$105", icon: "ðŸ§¥", label: "New", desc: "Drop shoulder, heavyweight cotton" },
        { id: 'hoodie3', name: "Cascade Zip Hoodie", price: "$115", icon: "ðŸ§¥", label: "Popular", desc: "Full zip, kangaroo pocket" },
        { id: 'hoodie4', name: "Ridge Pullover", price: "$92", icon: "ðŸ§¥", label: "Classic", desc: "Minimal design, brushed interior" },
        { id: 'hoodie5', name: "Summit Heavyweight", price: "$125", icon: "ðŸ§¥", label: "Premium", desc: "Extra heavyweight, garment dyed" }
      ],
      accessories: [
        { id: 'acc1', name: "Canvas Tote", price: "$68", icon: "ðŸ‘œ", label: "New", desc: "Heavy canvas with leather tag" },
        { id: 'acc2', name: "Leather Wallet", price: "$85", icon: "ðŸ‘›", label: "Premium", desc: "Full grain leather, RFID blocking" },
        { id: 'acc3', name: "Utility Belt Bag", price: "$75", icon: "ðŸŽ’", label: "Popular", desc: "Water-resistant, adjustable strap" },
        { id: 'acc4', name: "Tech Pouch", price: "$55", icon: "ðŸ’¼", label: "Essential", desc: "Organized compartments, durable" },
        { id: 'acc5', name: "Beach Towel", price: "$45", icon: "ðŸ–ï¸", label: "Summer", desc: "Oversized, quick-dry material" }
      ],
      headwear: [
        { id: 'hat1', name: "Ribbed Beanie", price: "$42", icon: "ðŸ§¢", label: "Winter", desc: "Merino blend, 12-gauge rib" },
        { id: 'hat2', name: "Dad Cap", price: "$38", icon: "ðŸ§¢", label: "Classic", desc: "Structured, curved brim" },
        { id: 'hat3', name: "Bucket Hat", price: "$48", icon: "ðŸ§¢", label: "Trending", desc: "Water-resistant, packable" },
        { id: 'hat4', name: "Trucker Cap", price: "$40", icon: "ðŸ§¢", label: "Vintage", desc: "Mesh back, adjustable strap" },
        { id: 'hat5', name: "Balaclava", price: "$52", icon: "ðŸ§£", label: "Technical", desc: "Wind-resistant, versatile wear" }
      ],
      outerwear: [
        { id: 'jacket1', name: "Technical Shell", price: "$145", icon: "ðŸ§¥", label: "Waterproof", desc: "Packable hood, taped seams" },
        { id: 'jacket2', name: "Field Jacket", price: "$165", icon: "ðŸ§¥", label: "Utility", desc: "Multiple pockets, waxed cotton" },
        { id: 'jacket3', name: "Puffer Vest", price: "$120", icon: "ðŸ§¥", label: "Insulated", desc: "Lightweight, water-resistant" },
        { id: 'jacket4', name: "Bomber Jacket", price: "$155", icon: "ðŸ§¥", label: "Classic", desc: "Ribbed cuffs, quilted lining" },
        { id: 'jacket5', name: "Rain Coat", price: "$135", icon: "ðŸ§¥", label: "Essential", desc: "Full coverage, breathable" }
      ],
      footwear: [
        { id: 'shoe1', name: "Studio Slides", price: "$75", icon: "ðŸ‘Ÿ", label: "Comfort", desc: "Dual-density foam, molded arch" },
        { id: 'shoe2', name: "Canvas Sneakers", price: "$95", icon: "ðŸ‘Ÿ", label: "Classic", desc: "Vulcanized sole, reinforced toe" },
        { id: 'shoe3', name: "Hiking Boots", price: "$165", icon: "ðŸ‘¢", label: "Outdoor", desc: "Waterproof, Vibram sole" },
        { id: 'shoe4', name: "Loafers", price: "$125", icon: "ðŸ‘ž", label: "Premium", desc: "Leather upper, cushioned insole" },
        { id: 'shoe5', name: "Running Shoes", price: "$135", icon: "ðŸ‘Ÿ", label: "Performance", desc: "Lightweight, responsive cushion" }
      ],
      limited: [
        { id: 'cap1', name: "Artist Series #1", price: "$120", icon: "ðŸŽ¨", label: "Limited", desc: "Collaboration with artist XYZ" },
        { id: 'cap2', name: "Heritage Drop", price: "$140", icon: "ðŸ›ï¸", label: "Archive", desc: "Reissue of 2018 classic" },
        { id: 'cap3', name: "Studio Sample", price: "$180", icon: "ðŸ”¬", label: "Rare", desc: "One-of-a-kind prototype" },
        { id: 'cap4', name: "Anniversary Edition", price: "$155", icon: "ðŸŽ‚", label: "Celebratory", desc: "10th anniversary special" },
        { id: 'cap5', name: "Digital Drop", price: "$95", icon: "ðŸ’»", label: "Digital", desc: "Includes NFT and physical item" }
      ],
      collab: [
        { id: 'col1', name: "Studio x Artist A", price: "$160", icon: "ðŸ¤", label: "Collab", desc: "Limited edition artwork print" },
        { id: 'col2', name: "Studio x Brand B", price: "$175", icon: "ðŸ¤", label: "Exclusive", desc: "Cross-brand design fusion" },
        { id: 'col3', name: "Studio x Musician", price: "$190", icon: "ðŸŽµ", label: "Special", desc: "Inspired by album artwork" },
        { id: 'col4', name: "Studio x Designer", price: "$200", icon: "âœï¸", label: "Premium", desc: "Haute couture influences" },
        { id: 'col5', name: "Studio x Community", price: "$145", icon: "ðŸ‘¥", label: "Collective", desc: "Designed with community input" }
      ]
    };

    // Function to populate shelves with products
    function populateShelves() {
      for (const [category, products] of Object.entries(productCollections)) {
        const shelfId = `${category}-shelf`;
        const shelfElement = document.getElementById(shelfId);
        
        if (shelfElement) {
          shelfElement.innerHTML = '';
          
          products.forEach(product => {
            const shelfItem = document.createElement('div');
            shelfItem.className = 'shelf-item';
            shelfItem.setAttribute('data-prod', product.id);
            shelfItem.innerHTML = `
              ${product.label ? `<div class="shelf-label">${product.label}</div>` : ''}
              <div class="shelf-img">${product.icon}</div>
              <div class="shelf-title">${product.name}</div>
              <div class="shelf-price">${product.price}</div>
              <p style="font-size: 12px; opacity: 0.8; margin: 8px 0;">${product.desc}</p>
              <button class="shelf-add-btn" onclick="addToCart('${product.id}')">ADD TO CART</button>
            `;
            
            shelfItem.addEventListener('click', (e) => {
              if (!e.target.classList.contains('shelf-add-btn')) {
                openProductModal(product.id, category);
              }
            });
            
            shelfElement.appendChild(shelfItem);
          });
        }
      }
      
      // Populate other shelves with default items
      const otherShelves = {
        'archive-shelf': ['Archive Hoodie 2019', 'Vintage Tee 2020', 'Classic Jacket 2021', 'Retro Cap 2018', 'Legacy Bag 2017'],
        'video-shelf': ['Lookbook Teaser', 'Studio Tour', 'Design Process', 'Material Focus', 'Behind Scenes'],
        'past-shelf': ['Season 1: Origins', 'Season 2: Expansion', 'Season 3: Refined', 'Season 4: Evolved', 'Season 5: Current'],
        'waitlist-shelf': ['Early Access', 'Exclusive Drops', 'Member Pricing', 'Preview Events', 'Gift Cards']
      };
      
      for (const [shelfId, items] of Object.entries(otherShelves)) {
        const shelfElement = document.getElementById(shelfId);
        if (shelfElement) {
          shelfElement.innerHTML = '';
          const icons = ['ðŸŽ', 'ðŸ‘‘', 'ðŸ’Ž', 'âš¡', 'ðŸŒŸ'];
          
          items.forEach((item, index) => {
            const shelfItem = document.createElement('div');
            shelfItem.className = 'shelf-item';
            shelfItem.innerHTML = `
              <div class="shelf-img">${icons[index]}</div>
              <div class="shelf-title">${item}</div>
              <p style="font-size: 12px; opacity: 0.8; margin: 8px 0;">Exclusive waitlist benefit</p>
              <button class="shelf-add-btn" onclick="joinWaitlist()">LEARN MORE</button>
            `;
            shelfElement.appendChild(shelfItem);
          });
        }
      }
    }

    // Function to open a product modal
    function openProductModal(productId, category) {
      // Find the product in our collections
      let product = null;
      for (const [cat, products] of Object.entries(productCollections)) {
        const found = products.find(p => p.id === productId);
        if (found) {
          product = found;
          break;
        }
      }
      
      if (!product) return;
      
      const modal = document.getElementById('modal');
      const modalTitle = document.getElementById('modal-title');
      const modalSub = document.getElementById('modal-sub');
      const modalPrice = document.getElementById('modal-price');
      const modalThumb = document.getElementById('modal-thumb');
      const modalBody = document.getElementById('modal-body');
      const modalShop = document.getElementById('modal-shop');
      
      modalTitle.textContent = product.name;
      modalSub.textContent = product.desc;
      modalPrice.textContent = product.price;
      modalThumb.textContent = product.icon;
      modalBody.innerHTML = `
        <p><strong>Category:</strong> ${category.charAt(0).toUpperCase() + category.slice(1)}</p>
        <p><strong>Description:</strong> ${product.desc}</p>
        <p><strong>Status:</strong> ${product.label || 'Available'}</p>
        <p style="margin-top: 16px;">This item is part of our curated collection. Limited quantities available.</p>
      `;
      modalShop.href = `#/product/${productId}`;
      
      modal.classList.add('open');
      modal.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
    }

    // Function to open a collection (for "View All" buttons)
    function openCollection(collectionName) {
      alert(`Opening ${collectionName} collection. In a full implementation, this would navigate to a collection page.`);
      // In a real app: window.location.href = `/collection/${collectionName}`;
    }

    // Cart functionality
    function addToCart(productId) {
      event.stopPropagation(); // Prevent opening the modal
      
      // Find the product
      let product = null;
      for (const [cat, products] of Object.entries(productCollections)) {
        const found = products.find(p => p.id === productId);
        if (found) {
          product = found;
          break;
        }
      }
      
      if (!product) return;
      
      // Simple cart notification
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 100px;
        right: 30px;
        background: var(--accent);
        color: var(--text-dark);
        padding: 12px 24px;
        border-radius: 8px;
        font-weight: 800;
        z-index: 1400;
        box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        animation: slideIn 0.3s ease;
      `;
      notification.textContent = `Added ${product.name} to cart!`;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease';
        setTimeout(() => notification.remove(), 300);
      }, 2000);
      
      // Add animation style
      const style = document.createElement('style');
      style.textContent = `
        @keyframes slideIn {
          from { transform: translateX(100%); opacity: 0; }
          to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideOut {
          from { transform: translateX(0); opacity: 1; }
          to { transform: translateX(100%); opacity: 0; }
        }
      `;
      if (!document.querySelector('#cart-animation')) {
        style.id = 'cart-animation';
        document.head.appendChild(style);
      }
    }

    // Waitlist function
    function joinWaitlist() {
      event.stopPropagation(); // Prevent opening the modal
      openModal('waitlist');
    }

    /* ================== Modal / lightbox wiring & product data ================== */
    const productData = {
      hoodie: {
        title: "Mason Heavy Fleece Hoodie",
        sub: "Oversized â€” Brushed interior â€” Heavy weight",
        thumb: "HOOD",
        price: "$98",
        body: `<p><strong>Fabric:</strong> 420gsm loopback fleece. <strong>Fit:</strong> Relaxed, drop shoulder. <strong>Colors:</strong> Ink, Chalk, Olive.</p><p style="margin-top:10px">Limited first run. Each piece comes with a numbered tag and an exclusive lookbook insert.</p>`,
        shop: "#/product/hoodie"
      },
      tote: {
        title: "Canvas Tote + Leather Tag",
        sub: "Reinforced handle â€” Vegetable tanned tag",
        thumb: "TOTE",
        price: "$68",
        body: `<p>Heavy canvas tote built for everyday. Trimmed with a small leather identification tag. Perfect for market runs & studio carry.</p>`,
        shop: "#/product/tote"
      },
      beanie: {
        title: "Ribbed Beanie",
        sub: "Merino blend â€” 12 gauge rib",
        thumb: "BEAN",
        price: "$42",
        body: `<p>Soft two-tone rib with low profile. Knitted in a merino blend for warmth without weight.</p>`,
        shop: "#/product/beanie"
      },
      jacket: {
        title: "Technical Shell Jacket",
        sub: "Water-resistant â€” Packable hood",
        thumb: "JKT",
        price: "$145",
        body: `<p>Cut for movement with taped seams and articulated sleeves. Packable into the chest pocket for travel-ready convenience.</p>`,
        shop: "#/product/jacket"
      },
      slides: {
        title: "Minimal Studio Slides",
        sub: "Dual-density foam â€” Molded arch",
        thumb: "SLD",
        price: "$75",
        body: `<p>Comfort-focused slide with contoured footbed and anti-slip outsole. Clean silhouette, corespun straps.</p>`,
        shop: "#/product/slides"
      },
      capsule: {
        title: "One-off Capsule",
        sub: "Unique drops â€” Artist editions",
        thumb: "CAP",
        price: "$120+",
        body: `<p>Short run capsule made in collaboration with guest artists. Each drop will be announced in advance to waitlist members.</p>`,
        shop: "#/product/capsule"
      },
      collab: {
        title: "Studio x Guest â€” Collab",
        sub: "Limited edition collaborative pieces",
        thumb: "COL",
        price: "$160",
        body: `<p>Designed with our guest artist; pieces feature custom artwork and alternate finishing details.</p>`,
        shop: "#/product/collab"
      },
      teaser: {
        title: "Cinematic Teaser",
        sub: "Motion lookbook â€” 00:45",
        thumb: "VID",
        price: "Free",
        body: `<p><em>Play the 45s cinematic tease (inline).</em></p><div style="margin-top:12px;background:#000;border-radius:8px;padding:14px;color:#fff;">Video placeholder â€” replace with embed or source.</div>`,
        shop: "#/video/teaser"
      },
      archive: {
        title: "Archive Pieces",
        sub: "Past seasons â€” Reference",
        thumb: "ARC",
        price: "Varies",
        body: `<p>Explore a curated selection of past-season favorites and reference pieces for design study.</p>`,
        shop: "#/archive"
      },
      waitlist: {
        title: "Join Waitlist",
        sub: "Be first for drops & collabs",
        thumb: "JOIN",
        price: "Free",
        body: `<p>Enter your email to join the waitlist and get early access to drops, collabs, and the selection portal.</p>
        <form id="waitlist-form" style="margin-top:10px; display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;">
          <input placeholder="Email address" type="email" style="padding:12px 16px;border-radius:8px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:var(--text-light);min-width:200px;flex-grow:1;">
          <button type="submit" style="padding:12px 24px;border-radius:8px;background:var(--accent);border:none;color:#111;font-weight:800;cursor:pointer;">Join Now</button>
        </form>`,
        shop: "#/waitlist"
      }
    };

    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modal-title');
    const modalSub = document.getElementById('modal-sub');
    const modalPrice = document.getElementById('modal-price');
    const modalBody = document.getElementById('modal-body');
    const modalThumb = document.getElementById('modal-thumb');
    const modalShop = document.getElementById('modal-shop');
    const closeBtn = modal.querySelector('.close');
    const closeCta = document.getElementById('modal-close-cta');

    function openModal(key){
      const pd = productData[key] || null;
      if(!pd) return;
      modalTitle.textContent = pd.title;
      modalSub.textContent = pd.sub;
      modalPrice.textContent = pd.price;
      modalThumb.textContent = pd.thumb;
      modalBody.innerHTML = pd.body;
      modalShop.href = pd.shop;
      modal.classList.add('open');
      modal.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
      
      // Handle form submission for waitlist
      const waitlistForm = document.getElementById('waitlist-form');
      if (waitlistForm) {
        waitlistForm.onsubmit = function(e) {
          e.preventDefault();
          const email = this.querySelector('input[type="email"]').value;
          alert(`Thank you! ${email} has been added to the waitlist.`);
          closeModal();
        };
      }
    }

    function closeModal(){
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    }

    document.addEventListener('click', (ev) => {
      const t = ev.target;
      if(t.matches('.buy-btn[data-prod]') || t.closest('.buy-btn[data-prod]')){
        const btn = t.matches('[data-prod]') ? t : t.closest('[data-prod]');
        const key = btn.getAttribute('data-prod');
        openModal(key);
      }
    });

    closeBtn.addEventListener('click', closeModal);
    closeCta.addEventListener('click', closeModal);

    // close on overlay click (but not when clicking inside card)
    modal.addEventListener('click', (e) => {
      if(e.target === modal) closeModal();
    });

    // keyboard accessibility: Esc to close
    window.addEventListener('keydown', (e) => {
      if(e.key === 'Escape' && modal.classList.contains('open')) closeModal();
    });

    /* ================== Palette switcher wiring ================== */
    (function(){
      const btnDefault = document.getElementById('btn-default');
      const btnNeon = document.getElementById('btn-neon');
      const btnPastel = document.getElementById('btn-pastel');
      const btnMono = document.getElementById('btn-mono');

      const buttons = [btnDefault, btnNeon, btnPastel, btnMono];

      function setPalette(name){
        document.body.classList.remove('palette--neon','palette--pastel','palette--mono');
        if(name === 'neon') document.body.classList.add('palette--neon');
        if(name === 'pastel') document.body.classList.add('palette--pastel');
        if(name === 'mono') document.body.classList.add('palette--mono');
        // update active state
        buttons.forEach(b => b.classList.remove('active'));
        if(name==='neon') btnNeon.classList.add('active');
        else if(name==='pastel') btnPastel.classList.add('active');
        else if(name==='mono') btnMono.classList.add('active');
        else btnDefault.classList.add('active');
      }

      btnDefault.addEventListener('click', () => setPalette('default'));
      btnNeon.addEventListener('click', () => setPalette('neon'));
      btnPastel.addEventListener('click', () => setPalette('pastel'));
      btnMono.addEventListener('click', () => setPalette('mono'));
    })();

    /* ================== Keyboard quick nav for demo ================== */
    (function(){
      const sections = Array.from(document.querySelectorAll('.section'));
      window.addEventListener('keydown', (e) => {
        if(e.key === 'ArrowDown' || e.key === 'ArrowUp'){
          e.preventDefault();
          const activeIndex = sections.findIndex(s => s.classList.contains('active'));
          let nextIndex = activeIndex;
          if(e.key === 'ArrowDown') nextIndex = Math.min(sections.length - 1, activeIndex + 1);
          if(e.key === 'ArrowUp') nextIndex = Math.max(0, activeIndex - 1);
          sections[nextIndex].scrollIntoView({behavior:'smooth'});
        }
      });
    })();

    // Initialize shelves when page loads
    document.addEventListener('DOMContentLoaded', populateShelves);
  </script>
</body>
</html>
